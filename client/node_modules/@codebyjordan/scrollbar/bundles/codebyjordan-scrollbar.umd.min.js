!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs/Observable"),require("rxjs/add/observable/fromEvent"),require("rxjs/Subject"),require("rxjs/add/observable/from"),require("rxjs/add/observable/merge"),require("rxjs/add/operator/mergeMap"),require("rxjs/add/operator/takeUntil"),require("rxjs/add/operator/map"),require("rxjs/add/operator/filter"),require("@angular/router"),require("@angular/common")):"function"==typeof define&&define.amd?define("@codebyjordan/scrollbar",["exports","@angular/core","rxjs/Observable","rxjs/add/observable/fromEvent","rxjs/Subject","rxjs/add/observable/from","rxjs/add/observable/merge","rxjs/add/operator/mergeMap","rxjs/add/operator/takeUntil","rxjs/add/operator/map","rxjs/add/operator/filter","@angular/router","@angular/common"],t):t((e.codebyjordan=e.codebyjordan||{},e.codebyjordan.scrollbar={}),e.ng.core,e.Rx,e.Rx.Observable,e.Rx,e.Rx.Observable,e.Rx.Observable,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.Rx.Observable.prototype,e.ng.router,e.ng.common)}(this,function(e,t,d,r,n,i,o,s,a,l,c,u,h){"use strict";function w(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function p(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,o,n=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n["return"])&&r.call(n)}finally{if(o)throw o.error}}return s}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}var O={isBrowser:!1,isRoot:!1,position:"right",alwaysVisible:!1,visibleTimeout:3e3,wrapperWidth:"100%",gridOffset:0,barOffset:".5rem",styles:{grid:{position:"absolute",top:0,bottom:0,display:"block",cursor:"pointer","z-index":99999,background:"transparent",width:"1rem","border-radius":0,margin:0,transition:"opacity 250ms ease-in-out"},bar:{position:"absolute",top:0,display:"block",cursor:"pointer",transition:"opacity 250ms ease-in-out","z-index":1e5,background:"#495057",width:".7rem","border-radius":"10px",margin:0}},classes:{wrapper:["cbj-scroll-wrapper"],grid:["cbj-scroll-grid"],bar:["cbj-scroll-bar"]}},f=function(){function e(e){this.mergeOptions(e,!0)}return e.prototype.mergeOptions=function(e,t,r){void 0===t&&(t=!1);var i=O;r&&(i=r);var o={},n={};if(e.styles){var s=Object.keys(e.styles);try{for(var a=w(s),l=a.next();!l.done;l=a.next()){o[h=l.value]=Object.assign({},i.styles[h],e.styles[h])}}catch(y){d={error:y}}finally{try{l&&!l.done&&(p=a["return"])&&p.call(a)}finally{if(d)throw d.error}}o=Object.assign({},i.styles,o)}else o=Object.assign({},i.styles);if(e.classes){s=Object.keys(e.classes);try{for(var c=w(s),u=c.next();!u.done;u=c.next()){var h;n[h=u.value]=v(i.classes[h],e.classes[h])}}catch(m){f={error:m}}finally{try{u&&!u.done&&(b=c["return"])&&b.call(c)}finally{if(f)throw f.error}}n=Object.assign({},i.classes,n)}else n=Object.assign({},i.classes);var d,p,f,b,g=Object.assign({},i,e,{styles:o},{classes:n});return t&&(this.options=g),g},Object.defineProperty(e.prototype,"isBrowser",{get:function(){return this.options.isBrowser},set:function(e){this.options.isBrowser=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return this.options.isRoot},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.options.position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alwaysVisible",{get:function(){return this.options.alwaysVisible},set:function(e){this.options.alwaysVisible=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleTimeout",{get:function(){return this.options.visibleTimeout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapperWidth",{get:function(){return this.options.wrapperWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridOffset",{get:function(){return this.options.gridOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barOffset",{get:function(){return this.options.barOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggleClasses",{get:function(){return this.options.toggleClasses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wStyles",{get:function(){return this.options.styles.wrapper},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gStyles",{get:function(){return this.options.styles.grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bStyles",{get:function(){return this.options.styles.bar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wClass",{get:function(){return this.options.classes.wrapper},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gClass",{get:function(){return this.options.classes.grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bClass",{get:function(){return this.options.classes.bar},enumerable:!0,configurable:!0}),e}(),b=new t.InjectionToken("Window");function g(){return window}var y=function(){function e(e){this.w=e,this.resizeObs=d.Observable.fromEvent(e,"resize")}return Object.defineProperty(e.prototype,"window",{get:function(){return this.w},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.w.innerWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMobile",{get:function(){return this.width<992},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height?this._height:this.w.innerHeight},set:function(e){this._height=e},enumerable:!0,configurable:!0}),e}();y.decorators=[{type:t.Injectable}],y.ctorParameters=function(){return[{type:undefined,decorators:[{type:t.Inject,args:[b]}]}]};var m=function(){function e(e){this.ws=e,this.scrollSubj=new n.Subject,this.ngUnsubscribe=new n.Subject,this.scrollObs=d.Observable.from(this.scrollSubj),this.childScrolling=!1}return Object.defineProperty(e.prototype,"scrollHeight",{get:function(){return this._scrollHeight?this._scrollHeight:this.ws.window.document.documentElement.scrollHeight},set:function(e){this._scrollHeight=e},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()},e.prototype.initWheel=function(e){var t=d.Observable.fromEvent(e,"DOMMouseScroll"),r=d.Observable.fromEvent(e,"mousewheel"),i=d.Observable.fromEvent(e,"wheel");return d.Observable.merge.apply(d.Observable,v([t,r,i])).map(function(e){e.preventDefault();var t={x:0,y:0,type:"wheel"};return e.wheelDelta?(t.y=-.025*e.wheelDelta,t.x=e.wheelDeltaX?-.025*e.wheelDeltaX:0):t.y=e.deltaY||e.detail,t})},e.prototype.initDrag=function(e,i){var t,o=this,n=d.Observable.fromEvent(this.ws.window,"mousemove"),r=d.Observable.fromEvent(i,"mousedown"),s=d.Observable.fromEvent(this.ws.window,"mouseup"),a=r.mergeMap(function(e){var t=e.pageY,r=parseFloat(o.ws.window.getComputedStyle(i).top);return n.map(function(e){return e.preventDefault(),r+e.pageY-t}).takeUntil(s)});if(t={start:a,end:s,move:n},this.ws.isMobile){var l=d.Observable.fromEvent(this.ws.window,"touchmove"),c=d.Observable.fromEvent(e,"touchstart"),u=d.Observable.fromEvent(this.ws.window,"touchend"),h=c.mergeMap(function(e){var t=e.targetTouches[0].pageY,r=-parseFloat(o.ws.window.getComputedStyle(i).top);return l.map(function(e){return-(r+e.targetTouches[0].pageY-t)}).takeUntil(u)});t={start:d.Observable.merge.apply(d.Observable,v([a,h])),end:d.Observable.merge.apply(d.Observable,v([s,u])),move:d.Observable.merge.apply(d.Observable,v([n,c]))}}return t},e.prototype.getElOffsetTop=function(e){var t=e.nativeElement.getBoundingClientRect().top,r=e.nativeElement.clientTop;return t+this.scrollPos-r},e.prototype.getElOffsetBottom=function(e){var t=e.nativeElement.getBoundingClientRect().top,r=e.nativeElement.clientTop+e.nativeElement.clientHeight;return t+this.scrollPos-r},e}();m.decorators=[{type:t.Injectable}],m.ctorParameters=function(){return[{type:y}]};var S={linear:function(e){return e},inQuad:function(e){return e*e},outQuad:function(e){return e*(2-e)},inOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},inCubic:function(e){return e*e*e},outCubic:function(e){return--e*e*e+1},inOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},inQuart:function(e){return e*e*e*e},outQuart:function(e){return 1- --e*e*e*e},inOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},inQuint:function(e){return e*e*e*e*e},outQuint:function(e){return 1+--e*e*e*e*e},inOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},j=function(){function e(e,t,r,i,o){var u=this;this.el=e,this.renderer=t,this.scroll=r,this.ws=i,this.router=o,this.unsubscribe=new n.Subject,this.isBrowser=!1,this.timers=[],this.setBarHeight=function(){var e=u.el.nativeElement;u.scrollHeight=Math.round(e.scrollHeight);var t=e.offsetHeight/e.scrollHeight*e.offsetHeight;u.renderer.setStyle(u.bar,"height",t+"px"),u.barNeeded(e.offsetHeight,t)&&u.config.alwaysVisible&&!u.hidden||!u.isBrowser||u.showHideBarGrid(),u.config.isRoot&&(u.ws.height=e.clientHeight,u.scroll.scrollHeight=u.scrollHeight)},this.toggleClasses=function(e){e.remove?u.renderer.removeClass(u[e.el],e.classes):u.renderer.addClass(u[e.el],e.classes)},this.showHideBarGrid=function(){var e=u.el.nativeElement,t=e.offsetHeight/e.scrollHeight*e.offsetHeight;u.notNeeded=!u.barNeeded(e.offsetHeight,t),u.hidden?u.notNeeded||(u.renderer.setStyle(u.grid,"opacity",1),u.renderer.setStyle(u.bar,"opacity",1),u.hidden=!1,u.config.alwaysVisible||(clearTimeout(u.timeout),u.timeout=setTimeout(u.showHideBarGrid,u.config.visibleTimeout))):!u.notNeeded&&u.config.alwaysVisible||(u.renderer.setStyle(u.grid,"opacity",0),u.renderer.setStyle(u.bar,"opacity",0),u.hidden=!0)},this.resetTime=function(){clearTimeout(u.timeout),u.hidden&&!u.notNeeded&&(u.renderer.setStyle(u.grid,"opacity",1),u.renderer.setStyle(u.bar,"opacity",1),u.hidden=!1),u.timeout=setTimeout(u.showHideBarGrid,u.config.visibleTimeout)},this.dragStart=function(e){u.config.isRoot||(u.scroll.childScrolling=!0),(!u.config.isRoot||u.config.isRoot&&!1===u.scroll.childScrolling)&&(u.renderer.setStyle(u.bar,"top",e+"px"),u.scrollContent())},this.scrollContent=function(){var e=u.el.nativeElement,t=e.offsetHeight-u.bar.offsetHeight,r=parseInt(u.ws.window.getComputedStyle(u.bar).top,10);r=Math.min(Math.max(r,0),t),r=Math.floor(r),u.renderer.setStyle(u.bar,"top",r+"px"),r=parseInt(u.ws.window.getComputedStyle(u.bar).top,10)/(e.offsetHeight-u.bar.offsetHeight)*(e.scrollHeight-e.offsetHeight),e.scrollTop=r,u.config.isRoot&&(u.scroll.scrollPos=r,u.scroll.scrollSubj.next(r))},this.dragEnd=function(){var e=u.el.nativeElement,t=parseInt(e.style.paddingTop,10),r=parseInt(e.style.paddingBottom,10);(0<t||0<r)&&u.scrollTo(0,300,"inOutCubic"),u.config.isRoot||(u.scroll.childScrolling=!1)},this.scrollWheel=function(i){u.config.isRoot||(u.scroll.childScrolling=!0);var o,n,s=u.el.nativeElement,a=Date.now(),l=s.offsetHeight-u.bar.offsetHeight,c=function(){var e=Date.now(),t=Math.min(1,(e-a)/200),r=S.inOutQuad(t);n=parseInt(u.ws.window.getComputedStyle(u.bar).top,10)+i.y*r,n=Math.min(Math.max(n,0),l),n=0<i.y?Math.ceil(n):Math.floor(n),u.renderer.setStyle(u.bar,"top",n+"px"),o=parseInt(u.ws.window.getComputedStyle(u.bar).top,10)/(s.offsetHeight-u.bar.offsetHeight),n=o*(s.scrollHeight-s.offsetHeight),s.scrollTop=n,u.config.isRoot&&(u.scroll.scrollPos=n,u.scroll.scrollSubj.next(n)),t<1&&u.ws.window.requestAnimationFrame(c),u.config.isRoot||(u.scroll.childScrolling=!1)};(!u.config.isRoot||u.config.isRoot&&!1===u.scroll.childScrolling)&&u.ws.window.requestAnimationFrame(c)}}return e.prototype.ngOnInit=function(){this.isBrowser=this.config.isBrowser,this.isBrowser||(this.config.alwaysVisible=!0),this.createScrollbar()},e.prototype.ngAfterViewInit=function(){if(this.isBrowser){var e=setTimeout(this.setBarHeight,250);this.timers.push(e)}else this.setBarHeight()},e.prototype.ngAfterViewChecked=function(){this.scrollHeight!==Math.round(this.el.nativeElement.scrollHeight)&&this.setBarHeight()},e.prototype.ngOnDestroy=function(){this.timers.forEach(function(e){return clearTimeout(e)}),clearTimeout(this.timeout),this.unsubscribe.next(),this.unsubscribe.complete()},e.prototype.createScrollbar=function(){this.setParentsStyles(),this.setElementStyle(),this.renderWrapper(),this.renderGrid(),this.renderBar(),this.isBrowser&&this.subscribe()},e.prototype.setParentsStyles=function(){var e=this.el.nativeElement,t=this.renderer.parentNode(e);this.renderer.setStyle(t,"position","relative");var r=this.ws.window.document.getElementsByTagName("BODY")[0];this.renderer.setStyle(r,"overflow","hidden")},e.prototype.setElementStyle=function(){var e=this.el.nativeElement;this.renderer.setStyle(e,"overflow","hidden")},e.prototype.renderWrapper=function(){var e=this,t=this.el.nativeElement;this.wrapper=this.renderer.createElement("div");try{for(var r=w(this.config.wClass),i=r.next();!i.done;i=r.next()){var o=i.value;this.renderer.addClass(this.wrapper,o)}}catch(u){n={error:u}}finally{try{i&&!i.done&&(s=r["return"])&&s.call(r)}finally{if(n)throw n.error}}var n,s,a=function(){e.renderer.setStyle(e.wrapper,"margin",e.ws.window.getComputedStyle(t).margin),e.renderer.setStyle(e.wrapper,"height",e.ws.window.getComputedStyle(t).height)};if(this.isBrowser){var l=setTimeout(a,250);this.timers.push(l)}else a();for(var c in this.config.wrapperWidth&&this.renderer.setStyle(this.wrapper,"width",this.config.wrapperWidth),this.config.wStyles)this.config.wStyles.hasOwnProperty(c)&&this.renderer.setStyle(this.wrapper,c,this.config.wStyles[c]);this.renderer.insertBefore(this.renderer.parentNode(t),this.wrapper,t),this.renderer.appendChild(this.wrapper,t)},e.prototype.renderGrid=function(){this.grid=this.renderer.createElement("div");try{for(var e=w(this.config.gClass),t=e.next();!t.done;t=e.next()){var r=t.value;this.renderer.addClass(this.grid,r)}}catch(s){o={error:s}}finally{try{t&&!t.done&&(n=e["return"])&&n.call(e)}finally{if(o)throw o.error}}for(var i in this.renderer.setStyle(this.grid,this.config.position,this.config.gridOffset),this.config.gStyles)this.config.gStyles.hasOwnProperty(i)&&this.renderer.setStyle(this.grid,i,this.config.gStyles[i]);var o,n;!this.config.alwaysVisible&&this.isBrowser&&this.renderer.setStyle(this.grid,"opacity",0),this.renderer.appendChild(this.wrapper,this.grid)},e.prototype.renderBar=function(){this.bar=this.renderer.createElement("div");try{for(var e=w(this.config.bClass),t=e.next();!t.done;t=e.next()){var r=t.value;this.renderer.addClass(this.bar,r)}}catch(a){i={error:a}}finally{try{t&&!t.done&&(o=e["return"])&&o.call(e)}finally{if(i)throw i.error}}var i,o,n="right"===this.config.position?"translate3d(50%, 0, 0)":"translate3d(-50%, 0, 0)";for(var s in this.renderer.setStyle(this.bar,"transform",n),this.renderer.setStyle(this.bar,this.config.position,this.config.barOffset),this.config.bStyles)this.config.bStyles.hasOwnProperty(s)&&this.renderer.setStyle(this.bar,s,this.config.bStyles[s]);!this.config.alwaysVisible&&this.isBrowser?(this.renderer.setStyle(this.bar,"opacity",0),this.hidden=!0):this.hidden=!1,this.renderer.appendChild(this.wrapper,this.bar)},e.prototype.subscribe=function(){var t=this,e=this.el.nativeElement,r=this.scroll.initDrag(e,this.bar);this.scroll.initWheel(e).takeUntil(this.unsubscribe).subscribe(this.scrollWheel),this.ws.resizeObs.takeUntil(this.unsubscribe).subscribe(this.setBarHeight),r.start.takeUntil(this.unsubscribe).subscribe(this.dragStart),r.end.takeUntil(this.unsubscribe).subscribe(this.dragEnd),this.config.alwaysVisible||r.move.takeUntil(this.unsubscribe).subscribe(this.resetTime),this.config.isRoot&&this.router&&this.isBrowser&&this.router.events.filter(function(e){return e instanceof u.NavigationStart}).subscribe(function(e){t.scrollTo(0,100,"linear")}),this.config.toggleClasses&&d.Observable.from(this.config.toggleClasses).takeUntil(this.unsubscribe).subscribe(this.toggleClasses)},e.prototype.barNeeded=function(e,t){return 2<Math.round(e)-Math.round(t)},e.prototype.scrollTo=function(s,a,l){var c=this,u=this.el.nativeElement,h=Date.now(),d=u.scrollTop,p=u.scrollHeight-u.clientHeight,f=Math.max(u.offsetHeight/u.scrollHeight*u.offsetHeight,30),b=parseInt(u.style.paddingTop,10)||0,g=parseInt(u.style.paddingBottom,10)||0,y=function(){var e=Date.now(),t=Math.min(1,(e-h)/a),r=S[l](t);if(0<b||0<g){var i=null;0<b&&(i=-(r*(s-(i=-b))+i),c.renderer.setStyle(u,"paddingTop",i+"px")),0<g&&(i=r*(s-(i=g))+i,c.renderer.setStyle(u,"paddingBottom",i+"px"))}else u.scrollTop=r*(s-d)+d;var o=u.scrollTop/p;if(0===g){var n=Math.round(Math.round(u.clientHeight*o)-f);0<n?c.renderer.setStyle(c.bar,"top",n+"px"):c.renderer.setStyle(c.bar,"top","0")}t<1&&c.ws.window.requestAnimationFrame(y)};this.ws.window.requestAnimationFrame(y)},e}();j.decorators=[{type:t.Directive,args:[{selector:"[cbjScrollbar]"}]}],j.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:m},{type:y},{type:u.Router,decorators:[{type:t.Optional}]}]},j.propDecorators={config:[{type:t.Input,args:["cbjScrollbar"]}]};var x=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[{provide:b,useFactory:g},y,m]}},e}();x.decorators=[{type:t.NgModule,args:[{imports:[h.CommonModule],declarations:[j],exports:[j]}]}],e.DEFAULT_SCROLLBAR=O,e.ScrollbarConfig=f,e.WINDOW=b,e._window=g,e.WindowService=y,e.ScrollbarService=m,e.CbjScrollbarDirective=j,e.CbjScrollbarModule=x,e.ɵa=j,e.ɵb=m,e.ɵd=b,e.ɵe=g,e.ɵc=y,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=codebyjordan-scrollbar.umd.min.js.map
